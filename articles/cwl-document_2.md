---
title: "CWL„ÅÆ‰ΩúÊàêÁí∞Â¢É„ÇíVScode„ÅÆÔΩ¢Dev ContainersÔΩ£„ÅÆÊ©üËÉΩ„Çí‰Ωø„Å£„Å¶ÊßãÁØâ„Åô„Çã (2)"
emoji: "üìë"
type: "tech" # tech: ÊäÄË°ìË®ò‰∫ã / idea: „Ç¢„Ç§„Éá„Ç¢
topics: ["CWL", "bioinformatics"]
published: false
---

__‚Äª‰ªäÂõû„ÅÆË®ò‰∫ã„Åß‰ΩøÁî®„Åó„ÅüCWL„ÅÆ„Éï„Ç°„Ç§„É´„Çí„Åä„ÅÑ„Å¶„ÅÑ„Çã„É™„Éù„Ç∏„Éà„É™„ÅØ‰ª•‰∏ã„Åã„Çâ„Ç¢„ÇØ„Çª„Çπ„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„ÅôÔΩ°__
https://github.com/yonezawa-sora/togotv_cwl_for_remote_container

:::message alert
„Åì„ÅÆËµ§„ÅÑ„Éï„Ç£„Éº„É´„Éâ„ÅØÂæå„Åª„Å©‰øÆÊ≠£„Åô„ÇãÁÇπ„Çí„É°„É¢„Åó„Å¶„ÅÑ„Åæ„Åô
:::

# „ÅØ„Åò„ÇÅ„Å´

:::message
__Êú¨Ë®ò‰∫ã„ÅÆÂØæË±°„Å®„Å™„ÇãÊñπ__

‚ñ† Áí∞Â¢ÉÊßãÁØâ„Åå„Åß„Åç„Åü„ÅÆ„ÅßÔΩ§„ÇÇ„Å£„Å®CWL„Çí„Ç¨„Ç∑„Ç¨„Ç∑Êõ∏„ÅÑ„Å¶„ÅÑ„Åç„Åü„ÅÑ‰∫∫
‚ñ† CWL„ÅÆÊñáÊ≥ï„ÇíÂÆüÈöõ„Å´Êõ∏„ÅÑ„Å¶„Åø„Å¶Â≠¶„Å≥„Åü„ÅÑ‰∫∫

(1)„ÅÆË®ò‰∫ã„ÇíË¶ã„Å¶„ÅÑ„Åü„Å†„ÅÑ„Åü„ÅÇ„Å®ÔΩ§Êõ¥„Å´CWL„ÇíÂãâÂº∑„Åó„Åü„ÅÑ„Å®„ÅÑ„ÅÜÊñπÂêë„Åë„ÅÆË®ò‰∫ã„Å´„Å™„Çä„Åæ„ÅôÔΩ°
:::

‰ª•Ââç„ÅÆË®ò‰∫ã„Åß„ÅØÔΩ§Áí∞Â¢ÉÊßãÁØâ„ÇÑ[zatsu-cwl-generator](https://github.com/tom-tan/zatsu-cwl-generator)„ÅÆ‰Ωø„ÅÑÊñπ„Çí„ÅîÁ¥π‰ªã„Åó„Åæ„Åó„ÅüÔΩ°
„Åì„ÅÆË®ò‰∫ã„Åß„ÅØÔΩ§zatsu-cwl-generator„ÅßÁîüÊàê„Åï„Çå„Åücwl„Éï„Ç°„Ç§„É´„Çí‰øÆÊ≠£„Åó„Å™„Åå„Çâ„ÉØ„Éº„ÇØ„Éï„É≠„Éº„ÇíÂÆüÈöõ„Å´Ë®òËø∞„Åô„ÇãÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶„ÅîÁ¥π‰ªã„Åó„Åæ„ÅôÔΩ° 

&nbsp;

# grep„Ç≥„Éû„É≥„Éâ„Å®wc„Ç≥„Éû„É≥„Éâ„ÇíCWLÂåñ„Åô„Çã

Âàù„ÇÅ„Å´(1)„ÅÆË®ò‰∫ã„Åß‰Ωú„Å£„Åügrep„Ç≥„Éû„É≥„Éâ„ÅÆcwl„Éï„Ç°„Ç§„É´„Å´Âä†„ÅàÔΩ§wc„Ç≥„Éû„É≥„Éâ„ÅÆÂá¶ÁêÜ„ÇíCWL„Å´„Çà„Å£„Å¶Ë®òËø∞„ÅóÔΩ§„Åì„ÅÆ2„Å§„Çí __ÈÄ£Á∂ö„Åó„Å¶Ëß£Êûê„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åô„Çã__ ‰æã„ÇíÁ¥π‰ªã„Åó„Åæ„ÅôÔΩ°
ÂÆüË°å„Åô„Çã„ÅÆ„ÅØÔΩ§`grep one mock.txt > grep_out.txt` „Å® `wc -l grep_out.txt > wc_out.txt` „ÅÆ2„Å§„Åß„ÅôÔΩ° 
„Åì„ÅÆ2„Å§„ÅØÔΩ§Êó•Êú¨Ë™û„Éâ„Ç≠„É•„É°„É≥„Éà(CWL Start Guide JP)[^1]„Åß„ÇÇË™¨Êòé„Åï„Çå„Å¶„ÅÑ„Çã‰æã„Å´„Å™„Çä„Åæ„ÅôÔΩ°

```bash:example
grep one mock.txt > grep_out.txt
wc -l grep_out.txt > wc_out.txt
```

&nbsp;

ÂâçÂõû„ÅØÁí∞Â¢ÉÊßãÁØâ„Å®ÔΩ§zatsu-cwl-genrator„Çí‰Ωø„Å£„Å¶CWL„Éï„Ç°„Ç§„É´„ÅÆÁîüÊàê„Å®ÂÆüË°å„ÇíË°å„ÅÑ„Åæ„Åó„ÅüÔΩ°
„Åì„ÅÆË®ò‰∫ã„Åß„ÅØÔΩ§Êõ¥„Å´Êâã„ÇíÂãï„Åã„Åô‰ΩúÊ•≠„ÇíË°å„Å£„Å¶„ÅÑ„Åç„Åæ„ÅôÔΩ°‰∏ªÂΩπ„Å®„Å™„Çã„Ç≥„Éû„É≥„Éâ„ÅØ`grep`„Å®`wc`„ÅÆ2„Å§„Åß„ÅôÔΩ°¬†
‰ªäÂõûË®òËø∞„Åô„ÇãÊµÅ„Çå„Å®„Åó„Å¶„ÅØ‰ª•‰∏ã„ÅÆ2„Çπ„ÉÜ„ÉÉ„Éó„Åß„ÅôÔΩ°
__Step1Ôºö„Ç≥„Éû„É≥„Éâ„ÅÆÂá¶ÁêÜ„Å´Èñ¢„Åô„Çãcwl„Éï„Ç°„Ç§„É´„ÇíÊõ∏„Åè(‰ªäÂõû„ÅØ2„Å§)__
__Step2Ôºö„ÉØ„Éº„ÇØ„Éï„É≠„ÉºÂÖ®‰Ωì„ÇíË®òËø∞„Åô„Çãcwl„Éï„Ç°„Ç§„É´„ÇíÊõ∏„Åè__

&nbsp;

## zatsu-cwl-generator„Çí‰Ωø„Å£„Å¶cwl„Éï„Ç°„Ç§„É´„ÇíÊõ∏„Åè(Step1)

„Åù„Çå„Åß„ÅØÂÆüÈöõ„Å´Êõ∏„ÅÑ„Å¶„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜÔΩ° 
„Åæ„ÅöÔΩ§ÂâçÂõûÊõ∏„ÅÑ„Å¶„ÅÑ„Åügrep„ÅÆÂá¶ÁêÜ„Å´Èñ¢„Åô„ÇãCWL„Éï„Ç°„Ç§„É´„Çí‰ª•‰∏ã„Å´Á§∫„Åó„Åæ„ÅôÔΩ°

https://github.com/yonezawa-sora/togotv_cwl_for_remote_container/blob/master/zatsu_generator/grep_zatsu.cwl

„Åì„ÅÆ„Éï„Ç°„Ç§„É´„ÅØÔΩ§zatsu-cwl-generator„Çí‰Ωø„Å£„Å¶ÁîüÊàê„Åó„Åü„ÇÇ„ÅÆ„ÇíÔΩ§Â∞ë„Åó‰øÆÊ≠£„Åó„Å¶„ÅÑ„Åæ„ÅôÔΩ°
ÂÜçÂ∫¶ÂÆüË°å„Åô„Çã„Å®‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´„Å™„Çä„Åæ„ÅôÔΩ°

```bash:
cwltool grep_zatsu.cwl --help
INFO /usr/local/bin/cwltool 3.1.20231016170136
INFO Resolved 'grep_zatsu.cwl' to 'file:///workspaces/togotv_shooting/zatsu_generator/grep_zatsu.cwl'
usage: grep_zatsu.cwl [-h] [--mock_txt MOCK_TXT] [job_order]

positional arguments:
  job_order            Job input json file

options:
  -h, --help           show this help message and exit
  --mock_txt MOCK_TXT  please input text file
```

&nbsp;

‰ª•Ââç„ÅÆË®ò‰∫ã„ÅßÁ¥π‰ªã„Åó„Åü„Çà„ÅÜ„Å´ÔΩ§wc„Ç≥„Éû„É≥„Éâ„Çí‰ΩøÁî®„Åó„ÅüCWL„Éï„Ç°„Ç§„É´„Çízatsu-cwl-generator„ÅßÂá∫Âäõ„Åó„Å¶„Åø„Åæ„ÅôÔΩ°

```bash:
zatsu-cwl-generator 'wc -l grep_out.txt > wc_out.txt' > wc_zatsu.cwl
```

Âá∫Âäõ„Åï„Çå„ÅüÁµêÊûú„Åå‰ª•‰∏ã„Å´„Å™„Çä„Åæ„ÅôÔΩ°
```yaml:
#!/usr/bin/env cwl-runner
# Generated from: wc -l grep_out.txt > wc_out.txt
class: CommandLineTool
cwlVersion: v1.0
baseCommand: wc
arguments:
  - -l
  - $(inputs.l)
inputs:
  - id: l
    type: File
    default:
      class: File
      location: grep_out.txt
outputs:
  - id: all-for-debugging
    type:
      type: array
      items: [File, Directory]
    outputBinding:
      glob: "*"
  - id: out
    type: stdout
stdout: wc_out.txt
```

„Åì„Å°„Çâ„ÇÇÂêåÊßò„Å´ÔΩ§ÂÆüË°å„ÅÆÂâç„Å´`--validate` „Ç™„Éó„Ç∑„Éß„É≥„Çí‰Ωø„Å£„Å¶Ë©ï‰æ°„Åó„Å¶„Åø„Åæ„ÅôÔΩ°

```bash:
cwltool --validate wc_zatsu.cwl
INFO /usr/local/bin/cwltool 3.1.20231016170136
INFO Resolved 'wc_zatsu.cwl' to 'file:///workspaces/togotv_shooting/zatsu_generator/wc_zatsu.cwl'
wc_zatsu.cwl:14:7: Warning: Field 'location' contains undefined reference to
                   'file:///workspaces/togotv_shooting/zatsu_generator/grep_out.txt'
WARNING wc_zatsu.cwl:14:7: Warning: Field 'location' contains undefined reference to
                   'file:///workspaces/togotv_shooting/zatsu_generator/grep_out.txt'
wc_zatsu.cwl is valid CWL.
```

Ë≠¶Âëä„ÅåÂá∫Âäõ„Åï„Çå„Åæ„Åó„Åü„ÅåÔΩ§Âü∫Êú¨ÁöÑ„Å™ÈÉ®ÂàÜ„ÅØÂ§ß‰∏àÂ§´„Å™„Çà„ÅÜ„Åß„ÅôÔΩ°
Ë≠¶Âëä„Åß„ÅØÔΩ§`location`„Éï„Ç£„Éº„É´„Éâ„Åå`grep_out.txt`„Å®„ÅÑ„ÅÜ„Éï„Ç°„Ç§„É´„ÇíÂèÇÁÖß„Åó„Å¶„ÅÑ„Çã„ÅåÔΩ§„Åù„ÅÆË®òËø∞ÂΩ¢Âºè„ÅåÂÆöÁæ©„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„Å®„ÅÑ„ÅÜ„É°„ÉÉ„Çª„Éº„Ç∏„ÅåÂá∫Âäõ„Åï„Çå„Å¶„ÅÑ„Åæ„ÅôÔΩ°
„Åì„ÅÆ„Åæ„ÅæÂÆüË°å„Åó„Å¶„ÇÇËâØ„ÅÑ„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì„ÅåÔΩ§CWL„ÅÆÂãâÂº∑„ÇÇÂÖº„Å≠„Å¶‰øÆÊ≠£„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜÔΩ°

Ë≠¶Âëä„Å´„ÇÇ„ÅÇ„Å£„Åü„Çà„ÅÜ„Å´ÔΩ§`location`„Éï„Ç£„Éº„É´„Éâ„Åß„ÅØÔΩ§„Éï„Ç°„Ç§„É´„Çí„Åü„Å†Êõ∏„Åè„ÅÆ„Åß„ÅØ„Å™„ÅèÔΩ§`file://`„Åã„Çâ„ÅØ„Åò„Åæ„ÇãÊõ∏„ÅçÊñπ(ÂÆüË°åËÄÖÂÅ¥„ÅÆ„Éï„Ç°„Ç§„É´„Ç∑„Çπ„ÉÜ„É†„ÅÆ„Éë„Çπ)„Å´„Åó„Åü„Åª„ÅÜ„ÅåËâØ„ÅÑ„Çà„ÅÜ„Åß„Åô[^2] [^3]ÔΩ°
„Åù„Åì„Åß‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´‰øÆÊ≠£„Åó„Åæ„Åó„ÅüÔΩ°

```yaml:
#!/usr/bin/env cwl-runner
# Generated from: wc -l grep_out.txt > wc_out.txt
class: CommandLineTool
cwlVersion: v1.0
baseCommand: wc
arguments:
  - -l
  - $(inputs.l)
inputs:
  - id: l
    type: File
    default:
      class: File
      location: file:///workspaces/togotv_shooting/zatsu_generator/grep_out.txt 
outputs:
  - id: all-for-debugging
    type:
      type: array
      items: [File, Directory]
    outputBinding:
      glob: "*"
  - id: out
    type: stdout
stdout: wc_out.txt
```

„ÇÇ„ÅÜ‰∏ÄÂ∫¶`--validate`„Ç™„Éó„Ç∑„Éß„É≥„ÅßÁ¢∫Ë™ç„Åó„Å¶„Åø„Åæ„ÅôÔΩ°

```bash:
cwltool --validate wc_zatsu.cwl
INFO /usr/local/bin/cwltool 3.1.20231016170136
INFO Resolved 'wc_zatsu.cwl' to 'file:///workspaces/togotv_shooting/zatsu_generator/wc_zatsu.cwl'
wc_zatsu.cwl:14:7: Warning: Field 'location' contains undefined reference to
                   'file:///workspaces/togotv_shooting/zatsu_generator/grep_out.txt'
WARNING wc_zatsu.cwl:14:7: Warning: Field 'location' contains undefined reference to
                   'file:///workspaces/togotv_shooting/zatsu_generator/grep_out.txt'
wc_zatsu.cwl is valid CWL.
```

Âêå„ÅòË≠¶Âëä„ÅåÂá∫„Å¶„Åó„Åæ„ÅÑ„Åæ„Åó„Åü„ÅåÔΩ§‰∏ÄÊó¶ÔΩ§„Åì„ÅÆ„Åæ„ÅæÂÆüË°å„Åó„Å¶„Åø„Åæ„ÅôÔΩ°
`--debug`„Ç™„Éó„Ç∑„Éß„É≥„Çí„Å§„Åë„Å¶ÂÆüË°å„Åó„Å¶„Åø„Åæ„ÅôÔΩ°

:::details result
```bash:
cwltool --debug ./zatsu_generator/wc_zatsu.cwl
INFO /usr/local/bin/cwltool 3.1.20231016170136
INFO Resolved './zatsu_generator/wc_zatsu.cwl' to 'file:///workspaces/togotv_shooting/zatsu_generator/wc_zatsu.cwl'
zatsu_generator/wc_zatsu.cwl:14:7: Warning: Field 'path' contains undefined reference to
                                   'file:///workspaces/togotv_shooting/zatsu_generator/grep_out.txt'
WARNING zatsu_generator/wc_zatsu.cwl:14:7: Warning: Field 'path' contains undefined reference to
                                   'file:///workspaces/togotv_shooting/zatsu_generator/grep_out.txt'
DEBUG Parsed job order from command line: {
    "__id": "./zatsu_generator/wc_zatsu.cwl",
    "l": {
        "class": "File",
        "path": "file:///workspaces/togotv_shooting/zatsu_generator/grep_out.txt"
    }
}
DEBUG [job wc_zatsu.cwl] initializing from file:///workspaces/togotv_shooting/zatsu_generator/wc_zatsu.cwl
DEBUG [job wc_zatsu.cwl] {
    "l": {
        "class": "File",
        "location": "file:///workspaces/togotv_shooting/zatsu_generator/grep_out.txt",
        "basename": "grep_out.txt",
        "nameroot": "grep_out",
        "nameext": ".txt"
    }
}
ERROR Input object failed validation:
zatsu_generator/wc_zatsu.cwl:13:7: [Errno 2] No such file or directory:
                                   '/workspaces/togotv_shooting/zatsu_generator/grep_out.txt'
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/cwltool/pathmapper.py", line 169, in visit
    st = os.lstat(deref)
FileNotFoundError: [Errno 2] No such file or directory: '/workspaces/togotv_shooting/zatsu_generator/grep_out.txt'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/cwltool/main.py", line 1301, in main
    (out, status) = real_executor(
  File "/usr/local/lib/python3.10/site-packages/cwltool/executors.py", line 62, in __call__
    return self.execute(process, job_order_object, runtime_context, logger)
  File "/usr/local/lib/python3.10/site-packages/cwltool/executors.py", line 145, in execute
    self.run_jobs(process, job_order_object, logger, runtime_context)
  File "/usr/local/lib/python3.10/site-packages/cwltool/executors.py", line 220, in run_jobs
    for job in jobiter:
  File "/usr/local/lib/python3.10/site-packages/cwltool/command_line_tool.py", line 992, in job
    builder.pathmapper = self.make_path_mapper(reffiles, builder.stagedir, runtimeContext, True)
  File "/usr/local/lib/python3.10/site-packages/cwltool/command_line_tool.py", line 485, in make_path_mapper
    return PathMapper(reffiles, runtimeContext.basedir, stagedir, separateDirs)
  File "/usr/local/lib/python3.10/site-packages/cwltool/pathmapper.py", line 95, in __init__
    self.setup(dedup(referenced_files), basedir)
  File "/usr/local/lib/python3.10/site-packages/cwltool/pathmapper.py", line 198, in setup
    self.visit(
  File "/usr/local/lib/python3.10/site-packages/cwltool/pathmapper.py", line 158, in visit
    with SourceLine(
  File "/usr/local/lib/python3.10/site-packages/schema_salad/sourceline.py", line 249, in __exit__
    raise self.makeError(str(exc_value)) from exc_value
schema_salad.exceptions.ValidationException: zatsu_generator/wc_zatsu.cwl:13:7: [Errno 2] No such file or directory:
                                   '/workspaces/togotv_shooting/zatsu_generator/grep_out.txt'
```
:::

„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„ÅüÔΩ°„Å©„ÅÜ„ÇÑ„Çâ`input`„Éï„Ç£„Éº„É´„Éâ„ÅÆÈÉ®ÂàÜ„Åß„ÅÜ„Åæ„Åè„ÅÑ„Å£„Å¶„ÅÑ„Å™„ÅÑ„Çà„ÅÜ„Åß„ÅôÔΩ°
`contents` „Å® `basename` „Éï„Ç£„Éº„É´„Éâ„ÇíËøΩÂä†„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜÔΩ°

```yaml:
#!/usr/bin/env cwl-runner
# Generated from: wc -l grep_out.txt > wc_out.txt
class: CommandLineTool
cwlVersion: v1.0
baseCommand: wc
arguments:
  - -l
  - $(inputs.grep_file)
inputs:
  - id: grep_file
    type: File
    default:
      class: File
      basename: "grepout.txt"
      contents: "This is a text file."
outputs:
  - id: all-for-debugging
    type:
      type: array
      items: [File, Directory]
    outputBinding:
      glob: "*"
  - id: out
    type: stdout
stdout: wc_out.txt
```

ÂÜçÂ∫¶ÂÆüË°å„Åó„Å¶ÁµêÊûú„ÇíË¶ã„Å¶„Åø„ÅüÊâÄÔΩ§„Ç´„Ç¶„É≥„Éà„ÅåÊú¨Êù•„ÅØ4„Å™„ÅÆ„Åß„Åô„ÅåÔΩ§0„Å®Ë°®Á§∫„Åï„Çå„Å¶„ÅÑ„Åæ„Åó„ÅüÔΩ°
„Åù„Åì„ÅßÔΩ§path„ÇíÊòéÁ§∫„Åô„Çå„Å∞ËâØ„ÅÑ„ÅÆ„Åã„Å™„Å®ËÄÉ„ÅàÔΩ§‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´`path`„Éï„Ç£„Éº„É´„Éâ„ÇíËøΩÂä†„Åó„Å¶ÂÜç‰øÆÊ≠£„Åó„Åæ„Åó„ÅüÔΩ°

```yaml:
#!/usr/bin/env cwl-runner
# Generated from: wc -l grep_out.txt > wc_out.txt
class: CommandLineTool
cwlVersion: v1.0
baseCommand: wc
arguments:
  - -l
  - $(inputs.grep_file)
inputs:
  - id: grep_file
    type: File
    default:
      class: File
      basename: "grepout.txt"
      contents: "This is a text file."
      path: ./grepout.txt # path„Éï„Ç£„Éº„É´„Éâ„ÇíËøΩÂä†
outputs:
  - id: all-for-debugging
    type:
      type: array
      items: [File, Directory]
    outputBinding:
      glob: "*"
  - id: out
    type: stdout
stdout: wc_out.txt
```

ÁµêÊûú„ÇíË¶ã„Å¶„Åø„Çã„Å®ÔΩ§4„Å®„Åó„Å£„Åã„Çä„Ç´„Ç¶„É≥„Éà„Åï„Çå„Å¶„ÅÑ„Åæ„Åó„ÅüÔΩ°

```text:
4 /tmp/o8n3tzc8/stg195a993d-1cac-4ba9-bfd2-4266ebad333f/grepout.txt
```

„Åì„ÅÆ„Çà„ÅÜ„Å´ÔΩ§„Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏„ÇÑÁµêÊûú„ÇíË¶ã„Çã„Å™„Å©„Åó„Å¶ÈÅ©Âàá„Å™„Éï„Ç°„Ç§„É´„Å´ÈÄêÊ¨°‰øÆÊ≠£„Åô„Çã„Åì„Å®„ÅåÂ§ß‰∫ã„Åß„ÅôÔΩ°

&nbsp;

## „ÉØ„Éº„ÇØ„Éï„É≠„Éº„ÅÆË®òËø∞„ÇíË°å„ÅÜ(Step2)

„Åù„Çå„Åß„ÅØÔΩ§„Åì„ÅÆ2„Å§„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó„ÇíÂÆüÈöõ„Å´„ÉØ„Éº„ÇØ„Éï„É≠„Éº„Å®„Åó„Å¶Ë®òËø∞„Åó„Å¶„ÅÑ„Åç„Åæ„ÅôÔΩ°
`grep-and-count.cwl`„Å®„ÅÑ„ÅÜ„Éï„Ç°„Ç§„É´„Çí‰ΩúÊàê„Åó„Å¶„ÅÑ„Åç„Åæ„ÅôÔΩ° 

‰ª•‰∏ã„Åß„ÅØÔΩ§„Åì„Çå„Åæ„Åß„Å®„ÅØÁï∞„Å™„ÇãÈÉ®ÂàÜ„Çí‰∏≠ÂøÉ„Å´Ëß£Ë™¨„Åó„Åæ„ÅôÔΩ°

`class`„Éï„Ç£„Éº„É´„ÉâÔºö„Åì„Åì„Å´„ÅØ„Åì„Çå„Åæ„Åß„Å®ÈÅï„ÅÑÔΩ§`Workflow`„Å®Ë®òËø∞„Åó„Åæ„ÅôÔΩ°

```yaml:
#!/usr/bin/env cwl-runner
cwlVersion: v1.0
class: Workflow
```
&nbsp;

Á∂ö„ÅÑ„Å¶`inputs`, `outputs`, „Åù„Åó„Å¶„ÉØ„Éº„ÇØ„Éï„É≠„Éº„ÅÆÊâãÈ†Ü„ÇíË®òËø∞„Åô„Çã`steps` „Å´„Å§„ÅÑ„Å¶Ê≥®ÁõÆ„Åó„Åæ„ÅôÔΩ° 

`inputs`„Éï„Ç£„Éº„É´„ÉâÔºö„Åì„Åì„Åß„ÅØÔΩ§ __ÔΩ¢„ÉØ„Éº„ÇØ„Éï„É≠„ÉºÔΩ£__ „Å®„Åó„Å¶ÂøÖË¶Å„Å™ÂÖ•Âäõ„ÅÆ„Éë„É©„É°„Éº„Çø„Å´„Å§„ÅÑ„Å¶Ë®òËø∞„Åó„Åæ„ÅôÔΩ°

```yaml=
#!/usr/bin/env cwl-runner
cwlVersion: v1.0
class: Workflow
inputs:
  grep_pattern:
    type: string
  target_file:
    type: File
```
‰ªäÂõû„ÅØÔΩ§ÊúÄÂàù„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó„Åß„ÅÇ„ÇãÔΩ¢grepÔΩ£„Ç≥„Éû„É≥„Éâ„ÅÆÊäú„ÅçÂá∫„Åô„Éë„Çø„Éº„É≥„Å®ÔΩ§ÂØæË±°„ÅÆ„Éï„Ç°„Ç§„É´„ÅÆ2„Å§„ÅÆ„Éë„É©„É°„Éº„Çø„Å®ÔΩ§„Åù„Çå„Åû„Çå„ÅÆ„Éë„É©„É°„Éº„Çø„ÅÆ„Çø„Ç§„Éó„ÇíË®òËø∞„Åó„Å¶„ÅÑ„Åæ„ÅôÔΩ°

&nbsp;

`outputs`„Éï„Ç£„Éº„É´„ÉâÔºö„Åì„Åì„Åß„ÅØÔΩ§ÔΩ¢wcÔΩ£„Ç≥„Éû„É≥„ÉâÂá∫Âäõ„ÅÆ„Éë„É©„É°„Éº„Çø„ÇíË®òËø∞„Åó„Åæ„ÅôÔΩ°

```yaml:
#!/usr/bin/env cwl-runner
cwlVersion: v1.0
class: Workflow
inputs:
  grep_pattern:
    type: string
  target_file:
    type: File 
outputs:
  counts:
    type: File
    outputSource: 2_wc/out
```
`outputSource` „ÅØÔΩ§„ÉØ„Éº„ÇØ„Éï„É≠„ÉºÂÖ®‰Ωì„ÅÆÂá∫Âäõ„ÇíÊòéÁ§∫ÁöÑ„Å´ÊåáÂÆö„Åô„Çã„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„Çã„Éï„Ç£„Éº„É´„Éâ„Åß„ÅÇ„ÇäÔΩ§ÁâπÂÆö„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó„ÅÆÂá∫Âäõ„Çí„ÉØ„Éº„ÇØ„Éï„É≠„ÉºÂÖ®‰Ωì„ÅÆÂá∫Âäõ„Å®„Åó„Å¶„Éû„ÉÉ„Éî„É≥„Ç∞„Åó„Åæ„ÅôÔΩ°

&nbsp;

`steps`„Éï„Ç£„Éº„É´„ÉâÔºö„Åì„Åì„Åß„ÅØÔΩ§ÂÖ∑‰ΩìÁöÑ„Å™„ÉØ„Éº„ÇØ„Éï„É≠„Éº„ÅÆÊâãÈ†Ü„ÇíË®òËø∞„Åó„Åæ„ÅôÔΩ° „Åù„Çå„Åû„Çå„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó„Åß„ÅÆ„Ç§„É≥„Éó„ÉÉ„ÉàÔΩ§„Ç¢„Ç¶„Éà„Éó„ÉÉ„Éà„Çí"in"ÔΩ§"out"„Å®„Åó„Å¶Ë®òËø∞„Åó„Åæ„ÅôÔΩ° 
`run`„Éï„Ç£„Éº„É´„Éâ„Å´„ÅØÂÖàÁ®ã‰ΩúÊàê„Åó„ÅüCommandLinetool„ÅÆÂá¶ÁêÜ„ÇíË®òËø∞„Åó„Åü„Éï„Ç°„Ç§„É´„ÇíË®òËø∞„Åó„Å¶„Åä„Åç„Åæ„ÅôÔΩ° 
„Å™„ÅäÔΩ§`out`„Éï„Ç£„Éº„É´„Éâ„Åß„ÅØÔΩ§„É™„Çπ„ÉàÂΩ¢Âºè(\[ \] „ÅßÂõ≤„ÇÄ)„ÅßÊõ∏„Åè„Åì„Å®„ÅßÔΩ§Ë§áÊï∞„ÅÆÂá∫Âäõ„ÇíÊõ∏„Åè„Åì„Å®„Åå„Åß„Åç„Åæ„ÅôÔΩ° 
ÂÆüÈöõ„Å´Êõ∏„ÅÑ„Å¶„Åø„Åü„ÅÆ„Åå‰ª•‰∏ã„Å´„Å™„Çä„Åæ„ÅôÔΩ°

```yaml:
#!/usr/bin/env cwl-runner
cwlVersion: v1.0
class: Workflow
inputs:
  grep_pattern:
    type: string
  target_file:
    type: File
outputs:
  counts:
    type: File
    outputSource: 2_wc/out
steps:
  1_grep:
    run: grep_zatsu.cwl
    in:
      one: grep_pattern
      mock_txt: target_file
    out: [out]
  2_wc:
    run: wc_zatsu.cwl
    in:
      grep_file: 1_grep/out
    out: [out] 
```

&nbsp;

### ÂÆüÈöõ„Å´ÂÆüË°å„Åó„Å¶„Åø„Çã

„Åù„Çå„Åß„ÅØÂÆüÈöõ„Å´„Åì„ÅÆ„ÉØ„Éº„ÇØ„Éï„É≠„Éº„ÇíÂÆüË°å„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜÔΩ° 
„ÉØ„Éº„ÇØ„Éï„É≠„Éº„ÅÆÂÆüË°å„Å´„ÅØ‰ªäÂõûÔΩ§cwl-runner„Çí‰ΩøÁî®„Åó„Å¶ÂÆüË°å„Åó„Åæ„ÅôÔΩ°

```bash:
cwl-runner grep-and-count.cwl --grep_pattern one --target_file ./grepout.txt
INFO /usr/local/bin/cwl-runner 3.1.20231016170136
INFO Resolved 'grep-and-count.cwl' to 'file:///workspaces/togotv_shooting/zatsu_generator/grep-and-count.cwl'
INFO [workflow ] start
INFO [workflow ] starting step 1_grep
INFO [step 1_grep] start
INFO [job 1_grep] /tmp/51srtkt0$ grep \
    one \
    /tmp/k89vh6vf/stg4d1cfe72-87be-4e6a-8243-0bd82be27e8b/grepout.txt > /tmp/51srtkt0/grepout.txt
INFO [job 1_grep] completed success
INFO [step 1_grep] completed success
INFO [workflow ] starting step 2_wc
INFO [step 2_wc] start
INFO [job 2_wc] /tmp/bkrv17e7$ wc \
    -l \
    /tmp/_1sj1zbz/stg729c8fba-f536-4f74-a7fe-e9dc49ebd3e7/grepout.txt > /tmp/bkrv17e7/wc_out.txt
INFO [job 2_wc] completed success
INFO [step 2_wc] completed success
INFO [workflow ] completed success
{
    "counts": {
        "location": "file:///workspaces/togotv_shooting/zatsu_generator/wc_out.txt",
        "basename": "wc_out.txt",
        "class": "File",
        "checksum": "sha1$58b721e8d56d12e12a31f7ec435491bf3faa767f",
        "size": 68,
        "path": "/workspaces/togotv_shooting/zatsu_generator/wc_out.txt"
    }
}INFO Final process status is success

```

„Åì„ÅÆ„Çà„ÅÜ„Å´Âá¶ÁêÜ„Åï„ÇåÔΩ§ÊúÄÁµÇÁöÑ„Å´wc\_out.txt„ÅåÂá∫Âäõ„Åï„Çå„Åæ„ÅôÔΩ°

# ÂèÇËÄÉ„É™„É≥„ÇØÈõÜ

[^1]: [CWL Start Guide JP: CWL „ÅßÊõ∏„ÅÑ„Å¶„Åø„Çã: „Ç≥„Éû„É≥„Éâ„É©„Ç§„É≥„ÉÑ„Éº„É´](https://github.com/pitagora-network/pitagora-cwl/wiki/CWL-Start-Guide-JP#cwl-%E3%81%A7%E6%9B%B8%E3%81%84%E3%81%A6%E3%81%BF%E3%82%8B-%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E3%83%84%E3%83%BC%E3%83%AB)
